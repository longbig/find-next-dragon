# 零售

1. 项目介绍
2. 项目提问：redis大key问题怎么处理的？异地多活，服务是有状态吗？离线任务写Redis时，redis是怎么做到两边机房都有的？双机房怎么部署的，Redis是主从结构，还是一主多从，数据是怎么同步的。如果再加一个机房，怎么修改同步脚本？
3. 发布抖动问题，直接说问题，怎么解决的？平台小流量预热，是否能把服务预热起来？场景都能跑到吗
4. 服务支撑一百万QPS的难点在哪里
5. 服务从0到1万，到10万，到100万都做了哪些事情，是如何支撑流量增长的
6. 除了监控之外，还有没有其他高可用的保障，系统性建设方案？服务分批发布，稳定性三板斧
7. 打断了，让直接介绍印象最深的一次故障处理过程？
8. 故障是怎么发现的？（机器人自动拉群，**我们有监控发现了**）
9. 怎么处理故障的？止血、切流、复盘、改进
10. 降级是有损的？
11. Redis的高可用是怎么保障的？（主从模式、哨兵、分片），主从是为了解决什么问题？除了能承担更高的QPS外，还有什么作用？冗余备份，假设主挂了，它怎么处理的？哨兵有可能会挂吗，哨兵之间是怎么达成一致的（哨兵是选举/共识机制，用的共识算法是Raft），怎么选出Redis的新主库？
12. 热key是怎么解决的，为什么不用本地缓存呢？本地缓存也可以刷新吧？
13. Redis的空间是有限的，如果空间满的话，还能往里面写数据吗？（缓存淘汰策略，默认不淘汰，返回异常）
14. LRU淘汰策略，删除一个KEY，是怎么删除的？删除的时间复杂度是多少？O（1），具体是怎么实现O(1)的时间复杂度的，说下LRU的实现是什么样的？
15. 写下代码：手写个LRU缓存
16. 反问：了解下具体的业务场景（**业务增长**，营销活动，玩法平台，承接流量，toC的大流量场景），高峰期流量有多大？50-100，面试流程？3+1轮
17. 当时零售看面过了，为什么没来？没发offer，说是没HC了