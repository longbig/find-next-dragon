# 宇宙条准备

# 准备

我们的面试是通过飞书进行视频面试，请准备带有摄像头的电脑；面试时会通过飞书进行实时的coding方面的考察，可以提前下载新版本的飞书客户端，代码考察功能更加完善。以下是一些针对技术面试准备的小建议，可以酌情参考~ 
【面试关注点】： 思考并梳理总结工作、多关注系统设计/架构要点，代码要针对性准备，简单的算法要熟悉。梳理核心项目经历。 
【面试准备】 
1、我们的技术面试会涉及到算法、数据结构和系统设计，面试前需要你做的准备具体如下： 
- 提前温习软件工程的核心概念， 例如: 如何从一个需求落实到一个系统设计，如何衡量两个不同设计的好坏，如何在各种限制下（人员、时间、资源等）选择其中更合适的设计，以及提升该设计的可拓展性等。 
- 在白板上练习算法题目，写出清晰、简洁、bug free的代码,，并衡量时间和空间复杂度以及可能存在的副作用。 
- 我们鼓励即时跟面试官沟通你的想法，一个好的解法往往是思维逻辑的展现，所以与面试官沟通思考的过程是非常重要的，这样在沟通的过程中你也能拿到更多关于问题本身的信息。 
- 尝试用不同的方法，思路或数据结构去解决同一个问题，并且衡量不同解法之间的优劣。 
- 我们需要是可执行的代码，而不是伪代码。 
- 我们需要你能掌握面试岗位对应的技术领域相关知识。 
2、以下是准备面试的资料/网站，包括但不限于：- 《Cracking the Coding Interview》- https://leetcode.com/- http://highscalability.com/ 
3、梳理核心项目经历，包括个人所承担的角色、业务背景和数据（可脱敏）、技术关键点、上下游协同情况、项目结果等。



孙梦的：

*  数据库问的不多，问场景题，MQ，慢sql怎么排查，系统容量问题
* 算法题是medium常见的
* 多复习业务，业务对口的







## 1.服务的高可用是怎么保证的？

* 异地多活，服务数据库都是双机房部署，张北和南通，日常两边都有流量，核心链路上保持CPU水位在35%，切流时单边机房可扛住全部流量
* 多种降级方案，降级预案完善（一键执行降级策略的开关，需要提前申请，避免在高峰期操作审批而耽误时间）
* 数据多版本存储
* 服务监控告警完善，数据同步链路监控告警完善
* 内存RTree启动耗时的优化
* 平台小流量预热服务
* 自动化服务异常发现，以及自动化或手动服务摘流，以及恢复上线



## 2.双机房下数据是怎么同步的？

* 数据同步是每天离线推送一份全量数据，张北南通两边都推，离线任务日志里会打印往Redis推的数据条数，通过这个判断两边数量一致。也有离线任务监控同步任务状态。监控推送过程中有没有数据发生异常，可以容忍的异常数据量，设的100条。



## 3.如何保证离线和在线数据的一致性？有不一致的情况发生吗，MySQL和Redis存储的？





## 3. Geohash的原理，RGC范围搜索的原理？

原理写在语雀上了，Geohash怎么做的范围搜索，周边搜时，自身以及周围8个格子都搜。按实际距离进行计算后排序。



## 4.谷歌S2空间索引的原理，RGC那块一次会查多少个格子

原理写在语雀上了，S2层级是11级，四边形的边长范围是3km-5km，RGC一次查询最多4个格子，4个key的数据。



## 内存RTree那块为什么不能热更新，比如在原数据结构上更新？





## 4.发现服务变慢了，怎么判断性能瓶颈的？



## 已经知道服务耗时很大了，怎么去优化？

* 串行改并行
* 数据结构优化
* 减少冗余计算、善用缓存、IO优化、同步改异步



## 5.可能的场景题

1. 设计一个积分排行榜系统 ，需要考虑的东西有哪些？
2. 布隆过滤器了解下，Redis会用到
3. Redis集群每个节点都是主从吗，如果Redis挂了怎么办？
4. 设计一个微信群红包系统，抢的红包金额随机
5. 用户输入一个长链接，转成短链接，要求用户点击短链接的时候，可以跳转到长链接的地址



## 慢SQL场景怎么优化？





## CAP原理简单说说



## redis删除key的方法，以及内存淘汰策略？